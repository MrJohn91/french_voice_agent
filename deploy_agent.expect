#!/usr/bin/expect -f

set timeout 600

# Set environment variables
set env(LIVEKIT_URL) "wss://french-voice-agent-60z1axrx.livekit.cloud"
set env(LIVEKIT_API_KEY) "APIBVbp5GLGDvXb"
set env(LIVEKIT_API_SECRET) "CxeTwbnXEJfUwOqAcPpgoiQJE5EzZx7R9nuW48UJGha"

# Change to project directory
cd "/Users/vee/Desktop/French Voice_Agent"

# Start the agent creation process
spawn lk agent create --secrets-file secrets.txt --secret-mount google_credential.json .

# Handle prompts - look for the Yes/No toggle
expect {
    "Yes" {
        send "y\r"
        exp_continue
    }
    "toggle" {
        send "y\r"
        exp_continue
    }
    "submit" {
        send "\r"
        exp_continue
    }
    eof {
        exit 0
    }
    timeout {
        puts "Timeout occurred"
        exit 1
    }
}